Stipula dell’accordo di interoperabilità
========================================

Nel MoDI si individuano gli Accordi di Interoperabilità per permettere 
agli Erogatori e ai Fruitori di dichiarare l’utilizzo degli e-service, 
comprensivo degli eventuali SLA condivisi tra essi. 

Il processo di stipula di un Accordo di Interoperabilità è realizzato 
su richiesta di un Fruitore per il tramite dell’Infrastruttura di 
Interoperabilità.

Il Fruitore identifica l’e-service di proprio interesse, considerando 
l’ultima versione del relativo descrittore di e-service dello stesso tra 
quelli presenti nel Catalogo API e prende visione:

- dell’interfaccia disponibile per l’utilizzo dell’e-service;

- dei Requisiti di Fruizione;

- del modello di Accordo di Interoperabilità.

I Fruitori, che non riscontrano la disponibilità di e-service per le 
proprie finalità all’interno del Catalogo API, POSSONO inoltrare agli 
Aderenti interessati una richiesta motivata di predisposizione di nuovi 
e-service per il tramite dell’Infrastruttura interoperabilità PDND. Gli 
Aderenti destinatari di tale richiesta DEVONO valutare in autonomia 
l’opportunità di darle seguito e DEVONO comunicare ai Fruitori le evidenze 
scaturite dalla valutazione per il tramite dell’Infrastruttura 
interoperabilità PDND.

Il Fruitore, con riferimento agli attributi dichiarati indicati nei requisiti 
di fruizione dell’e-service che non risultano tra quelli ad esso già associati 
sull’Infrastruttura Interoperabilità PDND, DEVE appurare se le condizioni 
per determinare l’associazione da un Aderente sono da esso soddisfatte 
e, in caso di esito positivo, DEVE dichiarare sotto la propria esclusiva 
responsabilità l’attributo. L’Infrastruttura di Interoperabilità DEVE 
registrare la dichiarazione del Fruitore associando ad esso l’attributo 
dichiarato.

Il Fruitore, per gli attributi verificati indicati nei Requisiti di Fruizione 
dell’e-service che non risultano tra quelli ad esso già associati 
sull’Infrastruttura di Interoperabilità, DEVE appurare se le condizioni 
per determinare l’associazione da un Aderente sono da esso soddisfatte ed, 
in caso di esito positivo, DEVE indicare l’attributo. L’Infrastruttura 
di Interoperabilità DEVE registrare l’indicazione del Fruitore.

Il Fruitore PUÒ riportare nella richiesta della stipula di un Accordo 
di Interoperabilità gli SLA concordati con l’Erogatore.

Il Fruitore DEVE compilare il modello di Accordo di Interoperabilità 
indicato dall’Erogatore ed allegarlo alla richiesta della stipula di 
un Accordo di Interoperabilità.

Il Fruitore PUÒ richiedere la stipula di un Accordo di Interoperabilità 
per uno specifico e-service solo se ad esso risultano: 

- associati tutti gli attributi certificati e dichiarati indicati nei 
  Requisiti di Fruizione;

- associati o indicati tutti gli attributi verificati indicati nei requisiti 
  di fruizione dell’e-service.

L’Infrastruttura Interoperabilità PDND registra la richiesta di stipula 
di un Accordo di Interoperabilità e la inoltra all’Erogatore dell’e-service 
oggetto dello stesso.

Ricevuta la richiesta di stipula di un Accordo di Interoperabilità, 
l’Erogatore DEVE:

- verificare la completezza delle informazioni del modello di Accordo 
  di Interoperabilità compilato dal Fruitore;

- verificare che il Fruitore sia in possesso di tutti gli attributi indicati 
  nei Requisiti di Fruizione e, nello specifico, per quanto 
  riguarda gli Attributi Verificati:

  - verificare se sussistono le condizioni per l’associazione di un attributo 
    Verificato indicato dal Fruitore, se precedentemente non verificato 
    da altro Erogatore nel caso in cui lo stesso Erogatore abbia indicato 
    di accettare tale verifica;

  - verificare se sussistono le condizioni per l’associazione di un attributo 
    verificato indicato dal Fruitore, per tutti gli attributi per cui 
    lo stesso Erogatore abbia indicato di non accettare le verifiche 
    effettuate da altro Erogatore;

- verificare la correttezza degli SLA riportati dal Fruitore, ove applicabili.

L’Erogatore alternativamente DEVE:

- accettare la richiesta di stipula di un Accordo di Interoperabilità;

- registrare le motivazioni che impediscono l’accettazione della richiesta 
  di stipula di un Accordo di Interoperabilità comprese le eventuali 
  circostanze che hanno determinato l’esito negativo delle precedenti 
  verifiche.

L’Infrastruttura Interoperabilità PDND registra quanto indicato 
dall’Erogatore e, nel caso di non accettazione da parte di quest’ultimo, 
comunica al Fruitore le motivazioni indicate.

In caso di accettazione della richiesta di stipula di un Accordo di 
Interoperabilità da parte dell’Erogatore, l’Infrastruttura Interoperabilità 
PDND rende disponibile alle parti lo stesso per la sottoscrizione con 
firma elettronica ai sensi del Regolamento eIDAS.

Successivamente alla stipula di un Accordo di Interoperabilità:

- l’Erogatore PUÒ sospendere temporaneamente la disponibilità dell’e-service 
  segnalando in anticipo al Fruitore tale circostanza nel rispetto delle 
  condizioni eventualmente indicate negli SLA concordati con il Fruitore;

- l’Erogatore, nel caso abbia indicato per uno o più Attributi Verificati 
  periodo temporale di validità nei Requisiti di Fruizione, 
  DEVE effettuare la verifica periodica degli stessi Attributi Verificati 
  coerentemente al periodo temporale di validità indicato e registrarne 
  gli esiti sull’Infrastruttura di Interoperabilità;

- l’Erogatore PUÒ effettuare la verifica degli Attributi Verificati relativi 
  ai Fruitori dei propri e-service in ogni momento lo ritenga utile e 
  registrarne gli esiti sull’Infrastruttura di Interoperabilità;

- il Fruitore DEVE registrare sull’Infrastruttura di Interoperabilità 
  la decadenza dei propri Attributi Dichiarati;

- l’Infrastruttura di Interoperabilità, nel caso al variare degli attributi 
  del Fruitore si determini una inadempimento dei Requisiti di Fruizione 
  indicati dall’Erogatore, DEVE comunicare al Fruitore e all’Erogatore 
  la circostanza e sospendere l’Accordo di Interoperabilità sulla base 
  delle indicazioni pervenute dagli stessi;

- l’Infrastruttura di Interoperabilità, nel caso in cui un l’Erogatore 
  abbia indicato per un attributo Verificato di accettare la verifica 
  di altri Erogatori e un periodo temporale di validità per uno specifico 
  e-service, DEVE aggiornare la data di ultima verifica per tale attributo 
  relativamente a tutti gli Accordi di Interoperabilità che afferiscono 
  allo stesso e-service in corrispondenza della verifica effettuata da 
  almeno un Erogatore;

- l’Infrastruttura di Interoperabilità DEVE comunicare all'approssimarsi 
  del periodo temporale di validità di un attributo Verificato agli Erogatori 
  interessati la circostanza;

- il Fruitore PUÒ terminare l’Accordo di Interoperabilità fatti salvi 
  gli eventuali vincoli concordati con l’Erogatore al momento della 
  stipula dello stesso.

Nel caso in cui l’Erogatore pubblichi una nuova versione di un descrittore 
di e-service relativo all’e-service oggetto di un Accordo di Interoperabilità, 
i Fruitori DOVREBBERO provvedere a implementare la nuova versione del 
descrittore di e-service e a registrare tale circostanza sull’Infrastruttura 
Interoperabilità PDND referenziando la nuova versione del descrittore 
di e-service utilizzata nel relativo Accordo di Interoperabilità.

Data model
----------
Nella seguente tabella sono riportati i dati minimi dell'Accordo di interoperabilità.

.. list-table::
    :header-rows: 1

    * -    nome
      -    descrizione
      -    tipo
      -    cardinalità
      -    obbligatorio
      -    modificabile
    * -    id accordo di interoperabilità
      -    identificativo univoco dell’accordo di interoperabilità
      -    uri
      -    [1..1]
      -    SI
      -    NO
    * -    id eservice
      -    riferimento all’e-service
      -    uri
      -    [1..1]
      -    SI
      -    NO
    * -    versione eservice
      -    versione dell’e-service in uso
      -    number
      -    [1..1]
      -    SI
      -    SI
    * -    id interfaccia
      -    riferimento all’interfaccia
      -    uri
      -    [1..1]
      -    SI
      -    NO
    * -    id fruitore
      -    riferimento al Fruitore
      -    uri
      -    [1..1]
      -    SI
      -    NO
    * -    endpont retrive 
      -    endpoint dell’interfaccia implementata dal Fruitore privato per assicura all’Erogatore la possibilità di recuperari i documenti che attestano la legittimità dello specifico trattamento dei dati personali 
      -    url
      -    [0..1]
      -    NO
      -    SI
    * -    Voucher time-to-live 
      -    numero di secondi di validità del Voucher 
      -    number
      -    [1..1]
      -    NO
      -    NO
    * -    Voucher PoP 
      -    indica se il Voucher deve essere decorato dalla PoP da parte dell’Erogatore 
      -    boolean
      -    [1..1]
      -    SI
      -    NO
    * -    sla
      -    collezione degli SLA concordati tra Erogatore e Fruitore
      -    SLA
      -    [0..n]
      -    NO
      -    SI
    * -    ref accordo di interoperabilità
      -    riferimento all’accordo di interoperabilità stipulato tra Erogatore e Fruitore
      -    uri
      -    [0..1]
      -    NO
      -    SI
    * -    motivi non accettazione
      -    motivazione che impediscono l’accettazione della stipula da parte dell’Erogatore
      -    (data, text)
      -    [0..n]
      -    NO
      -    SI
    * -    sospensione temporanea
      -    indica se l’e-service è temporaneamente sospeso da parte dell’Erogatore 
      -    (data start, data end)
      -    [0..n]
      -    NO
      -    SI
    * -    data registrazione
      -    data dell’ultima modifica dei dati dell’accordo di interoperabilità
      -    date
      -    [1..1]
      -    SI
      -    SI
    * -    data richiesta
      -    data della richiesta di stipula dell’accordo di interoperabilità
      -    date
      -    [0..1]
      -    NO
      -    NO, l’attributo può essere valorizzato una sola volta al momento della richiesta di stipula da parte del Fruitore
    * -    data approvazione
      -    data di approvazione di stipula dell’accordo di interoperabilità
      -    date
      -    [0..1]
      -    NO
      -    NO, l’attributo può essere valorizzato una sola volta al momento della accettazione da parte dell’Erogatore
    * -    data terminazione
      -    data della richiesta di terminazione dell’accordo di interoperabilità
      -    date
      -    [0..1]
      -    NO
      -    NO, l’attributo può essere valorizzato una sola volta al momento della richiesta di stipula da parte del Fruitore

L’Infrastruttura interoperabilità PDND gestisce i dati di servizio necessari 
ad assicurare l’implementazione delle funzionalità per la gestione degli 
accordi di interoperabilità coerentemente quanto descritto in precedenza.

.. forum_italia::
   :topic_id: 26430
   :scope: document
